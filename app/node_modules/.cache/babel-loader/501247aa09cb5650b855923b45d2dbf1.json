{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\valen\\\\Documents\\\\projet-SI\\\\app\\\\src\\\\Components\\\\GestionUser\\\\UserForm.js\";\n//Rien d'intéressant ici du pur affichage html/css\nimport React from 'react';\nimport API from '../../utils/API';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass UserForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      isLoaded: false,\n      items: [],\n      identifiant: '',\n      motDePasse: '',\n      roles: [],\n      idRole: 1\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.selectChange = this.selectChange.bind(this);\n  }\n\n  componentDidMount() {\n    API.afficherUsers().then(response => response.json()).then(response => this.setState({\n      isLoaded: true,\n      items: response\n    })).catch(err => console.error(err));\n    API.afficherRoles().then(response => response.json()).then(response => this.setState({\n      roles: response\n    })).catch(err => console.error(err));\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  selectChange(event) {\n    const valueSelectedByUser = parseInt(event.target.value);\n    this.setState({\n      idRole: valueSelectedByUser\n    });\n  }\n\n  handleSubmit(event) {\n    API.postUser(this.state.identifiant, this.state.motDePasse, this.state.idRole).then(response => response.json()).then(response => alert('L\\'utilisateur : ' + this.state.identifiant + ' a été enregistré, réponse du serveur : ' + response)).catch(err => console.error(err));\n    event.preventDefault();\n  }\n\n  render() {\n    const {\n      error,\n      isLoaded\n    } = this.state;\n\n    if (error) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Erreur : \", error.message]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 14\n      }, this);\n    } else if (!isLoaded) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Chargement\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 14\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"container mt-5 mb-3 bg-light\",\n          onSubmit: this.handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            class: \"form-label\",\n            children: [\"Identifiant :\", /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"identifiant\",\n              class: \"form-control\",\n              type: \"text\",\n              value: this.state.identifiant,\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label ml-5\",\n            children: [\"Mot De Passe :\", /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-control\",\n              name: \"motDePasse\",\n              type: \"text\",\n              value: this.state.motDePasse,\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"form-select\",\n            \"aria-label\": \"Default select example\",\n            onChange: this.selectChange,\n            children: this.state.roles.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: item.id,\n              children: item.nom\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 42\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn btn-success mt-2\",\n            children: \"Ajouter\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this);\n    }\n  }\n\n}\n\nexport default UserForm;","map":{"version":3,"sources":["C:/Users/valen/Documents/projet-SI/app/src/Components/GestionUser/UserForm.js"],"names":["React","API","UserForm","Component","constructor","props","state","error","isLoaded","items","identifiant","motDePasse","roles","idRole","handleChange","bind","handleSubmit","selectChange","componentDidMount","afficherUsers","then","response","json","setState","catch","err","console","afficherRoles","event","target","name","value","valueSelectedByUser","parseInt","postUser","alert","preventDefault","render","message","map","item","id","nom"],"mappings":"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","sourcesContent":["//Rien d'intéressant ici du pur affichage html/css\r\nimport React from 'react';\r\nimport API from '../../utils/API';\r\n\r\nclass UserForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      error: null,\r\n      isLoaded: false,\r\n      items: [],\r\n      identifiant: '',\r\n      motDePasse: '',\r\n      roles:[],\r\n      idRole:1\r\n    };\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.selectChange = this.selectChange.bind(this);\r\n\r\n  }    \r\n  \r\n  componentDidMount() {       \r\n    API.afficherUsers()\r\n    .then(response => response.json())\r\n    .then(response => this.setState({isLoaded: true, items: response}))\r\n    .catch(err => console.error(err));\r\n    \r\n    API.afficherRoles()\r\n    .then(response => response.json())\r\n    .then(response => this.setState({roles: response}))\r\n    .catch(err => console.error(err));\r\n  }\r\n  \r\n  handleChange(event) {\r\n    this.setState({\r\n      [event.target.name]: event.target.value\r\n    });\r\n  }\r\n\r\n  selectChange(event){\r\n    const valueSelectedByUser = parseInt(event.target.value);\r\n    this.setState({idRole: valueSelectedByUser });\r\n  }\r\n  \r\n  handleSubmit(event) {\r\n    API.postUser(this.state.identifiant, this.state.motDePasse, this.state.idRole)\r\n    .then(response => response.json())\r\n    .then(response => alert('L\\'utilisateur : ' + this.state.identifiant + ' a été enregistré, réponse du serveur : '+response))\r\n    .catch(err => console.error(err));\r\n    \r\n    event.preventDefault();\r\n  }\r\n  \r\n  render() {\r\n    \r\n    const { error, isLoaded } = this.state;\r\n    if (error) {\r\n      return <div>Erreur : {error.message}</div>;\r\n    } else if (!isLoaded) {\r\n      return <div>Chargement…</div>;\r\n    } else {\r\n      return (\r\n        <div className=\"container\">\r\n        <form className=\"container mt-5 mb-3 bg-light\" onSubmit={this.handleSubmit}>\r\n\r\n        <label  class=\"form-label\">\r\n        Identifiant :\r\n        <input name=\"identifiant\" class=\"form-control\" type=\"text\" value={this.state.identifiant} onChange={this.handleChange} />\r\n        </label>\r\n\r\n        <label  className=\"form-label ml-5\">\r\n        Mot De Passe :\r\n        <input className=\"form-control\" name=\"motDePasse\" type=\"text\" value={this.state.motDePasse} onChange={this.handleChange} />\r\n        </label>\r\n\r\n        <select className=\"form-select\" aria-label=\"Default select example\" onChange={this.selectChange}>\r\n          {this.state.roles.map(item => (<option value={item.id}>{item.nom}</option>))}\r\n        </select>\r\n        <button type=\"submit\" className=\"btn btn-success mt-2\">Ajouter</button>\r\n        </form>\r\n        </div>\r\n        );\r\n      }\r\n    }\r\n  }\r\n  \r\n  export default UserForm;"]},"metadata":{},"sourceType":"module"}